{% load static %}

<div class="enclose-container">

  <header class="enclose-header">
    <h1>Pâturage</h1>
    <p class="subtitle">Laissez brouter le cheval avec un nombre limité de murs</p>
    <p class="puzzle-date">
      Puzzle du {{ puzzle_date|date:"d/m/Y" }}
    </p>
  </header>

  

  <div class="game-layout">
    <section class="leaderboard">
      <h3>Classement</h3>

      {% if leaderboard %}
        <ol>
          {% for entry in leaderboard %}
            <li
              {% if user.is_authenticated and entry.user == user %}
                class="me"
              {% endif %}
            >
              <strong>{{ entry.user.username }}</strong>
              <br/>{{ entry.area }} ({{ entry.walls_used }} murs)
            </li>
          {% endfor %}
        </ol>
      {% else %}
        <p>Aucun score pour ce puzzle.</p>
      {% endif %}
    </section>
    <canvas id="board"></canvas>

    <aside class="game-panel">
      <div class="stat">
        Aire : <span id="area">N/A</span>
      </div>
      <div class="stat">
        Murs restants : <span id="walls-left"></span>
      </div>

      <button id="submit-btn" disabled>
        Valider
      </button>

      <div id="feedback"></div>
    </aside>
  </div>

</div>

<script>
  window.PUZZLE = {{ puzzle_json|safe }};
  window.SAVED_WALLS = {{ saved_walls|safe }};
  window.GAME_LOCKED = {{ locked|yesno:"true,false" }};
</script>
<script src="{% static 'enclose/enclose.js' %}"></script>
<link rel="stylesheet" href="{% static 'enclose/enclose.css' %}">